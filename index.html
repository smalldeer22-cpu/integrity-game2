<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å»‰æ”¿ç¿»ç¿»æ¨‚ - èª ä¿¡è‹±é›„æŒ‘æˆ°è³½</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            min-height: 100vh;
            touch-action: manipulation;
            overflow-x: hidden;
            -webkit-user-select: none;
            user-select: none;
        }

        .main-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            width: 100%;
            max-width: 1100px;
            margin: 0 auto;
        }

        @media (min-width: 1024px) {
            .main-container { flex-direction: row; align-items: flex-start; }
        }

        /* æ ¸å¿ƒå¡ç‰Œå®¹å™¨ */
        .card { 
            perspective: 1000px; 
            aspect-ratio: 3 / 4; 
            position: relative;
        }
        
        .card-inner {
            position: absolute;
            width: 100%;
            height: 100%;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
            cursor: pointer;
        }

        .card.flipped .card-inner,
        .card.matched .card-inner { 
            transform: rotateY(180deg); 
        }

        .card-front, .card-back {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 8px;
            border: 3px solid #fff;
        }
        
        /* å¡ç‰‡æ­£é¢ï¼šè“‹èµ·ä¾†æ™‚é¡¯ç¤ºèƒŒæ™¯åœ– */
        .card-front { 
            background-color: #e5e7eb;
            background-image: url('bg.jpg'); 
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            z-index: 2;
        }

        /* å¡ç‰‡èƒŒé¢ï¼šç¿»é–‹å¾Œé¡¯ç¤ºæ–‡å­— */
        .card-back {
            background-color: white; 
            color: #1e3a8a; 
            transform: rotateY(180deg);
            z-index: 1;
            font-size: 0.75rem; 
            font-weight: 700;
            line-height: 1.4; 
            text-align: center;
            overflow: hidden;
            border-color: #3b82f6;
        }

        .card.matched .card-back { 
            background-color: #dcfce7; 
            border-color: #22c55e; 
            color: #14532d; 
        }

        /* å·¦å´æ¸…å–® */
        .hint-item {
            border-left: 4px solid #3b82f6; background-color: #f8fafc;
            padding: 8px 12px; border-radius: 4px; margin-bottom: 6px;
        }

        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        .match-anim { animation: pulse 0.5s ease-in-out; }

        .progress-fill { transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body class="p-4 flex flex-col items-center">

    <!-- é ‚éƒ¨è³‡è¨Šæ¬„ -->
    <div id="game-header" class="w-full max-w-2xl text-center mb-6">
        <h1 class="text-3xl font-black text-blue-900 mb-2 tracking-tighter">ğŸ›¡ï¸ å»‰æ”¿å®£å°ç¿»ç¿»æ¨‚</h1>
        <div class="flex justify-around items-center bg-white/80 backdrop-blur rounded-2xl py-3 shadow-sm border border-blue-100">
            <div class="text-center px-4">
                <p class="text-[10px] text-gray-500 font-bold uppercase mb-1">ä»»å‹™é€²åº¦</p>
                <div class="w-32 sm:w-40 bg-gray-200 rounded-full h-4 border border-blue-50 overflow-hidden relative">
                    <div id="progress-bar" class="progress-fill bg-green-500 h-full w-0"></div>
                    <div id="progress-text" class="absolute inset-0 flex items-center justify-center text-[10px] font-black text-blue-900">0 / 6</div>
                </div>
            </div>
            <div class="text-center border-l border-gray-100 pl-8 pr-4">
                <p class="text-[10px] text-gray-500 font-bold uppercase mb-1">æŒ‘æˆ°æ™‚é–“</p>
                <p id="timer-display" class="text-xl font-black text-red-600 leading-none">0s</p>
            </div>
        </div>
    </div>

    <div class="main-container">
        <!-- å·¦å´ï¼š9 é»å®£å°æ¸…å–® -->
        <div class="w-full lg:w-1/3 bg-white/95 rounded-2xl p-5 shadow-lg border border-blue-100">
            <h3 class="font-black text-blue-800 text-lg border-b-2 border-blue-500 mb-4 pb-2 flex items-center gap-2">
                <span>ğŸ“–</span> å®£å°è¦é»åƒè€ƒ
            </h3>
            <div id="hint-list" class="space-y-2 text-xs text-gray-700 font-bold">
                <!-- JS å‹•æ…‹ç”Ÿæˆ -->
            </div>
        </div>

        <!-- å³å´ï¼š4x3 éŠæˆ²æ¿ -->
        <div id="game-board" class="grid grid-cols-4 gap-2 w-full lg:w-2/3">
            <!-- JS å‹•æ…‹ç”Ÿæˆ -->
        </div>
    </div>

    <!-- è“‹æ¿å½ˆçª— -->
    <div id="modal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-3xl p-6 w-full max-w-sm text-center shadow-2xl overflow-y-auto max-h-[90vh]">
            
            <!-- é–‹å§‹ç•«é¢ -->
            <div id="start-view">
                <div class="w-32 h-44 mx-auto mb-6 rounded-lg shadow-md border-4 border-white overflow-hidden bg-gray-100 flex items-center justify-center">
                    <img id="preview-img" src="bg.jpg" alt="å¡ç‰Œå°é¢" class="w-full h-full object-cover" onerror="this.src='https://via.placeholder.com/150x200?text=å±±ä¸Šå€å…¬æ‰€'">
                </div>
                <h2 class="text-2xl font-black text-blue-900 mb-2">èª ä¿¡è‹±é›„å¤§æŒ‘æˆ°</h2>
                <p class="text-gray-600 mb-8 font-bold text-sm leading-relaxed">
                    æ‰¾å‡º 4x3 é™£åˆ—ä¸­å®Œå…¨ç›¸åŒçš„å¥å­ï¼Œ<br>
                    å­¸ç¿’å»‰æ”¿çŸ¥è­˜é ˜å–çå‹µï¼
                </p>
                <button id="start-btn" class="w-full bg-blue-600 text-white font-black py-4 rounded-2xl shadow-lg active:scale-95 transition-all text-lg">
                    é–‹å§‹æŒ‘æˆ°
                </button>
                <p class="mt-4 text-[10px] text-gray-400 font-bold">è‡ºå—å¸‚å±±ä¸Šå€å…¬æ‰€æ”¿é¢¨å®¤</p>
            </div>

            <!-- çµç®—ç•«é¢ -->
            <div id="end-view" class="hidden">
                <div class="text-4xl mb-2">ğŸ‰</div>
                <h2 class="text-2xl font-black text-blue-800 mb-1">æŒ‘æˆ°å®Œæˆï¼</h2>
                <p id="final-time-text" class="text-blue-600 font-black text-xl mb-6 tracking-tighter"></p>
                
                <div class="mb-8 p-6 bg-blue-50 rounded-2xl border border-blue-100">
                    <p class="text-blue-800 font-bold mb-2 text-lg">æ­å–œéé—œï¼</p>
                    <p class="text-gray-600 text-sm">æ‚¨å°å»‰æ”¿æ³•è¦å·²æœ‰å……åˆ†èªè­˜ï¼Œ<br>è«‹å‘å·¥ä½œäººå“¡å‡ºç¤ºæ­¤ç•«é¢å…Œæ›å°ç¦®ç‰©ã€‚</p>
                </div>

                <button id="restart-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-black py-4 rounded-2xl shadow-lg active:scale-95 transition-all text-lg">
                    å†æŒ‘æˆ°ä¸€æ¬¡
                </button>
            </div>
        </div>
    </div>

    <script>
        const allSlogans = [
            "å°å…¬å‹™å“¡æœ€å¥½çš„ç¦®ç‰©æ˜¯ç¨±è®šï¼Œè€Œä¸æ˜¯é€ç¦®",
            "è¡Œè³„æ”¶è³„éƒ½æœ‰ç½ªï¼Œåˆ‡å‹¿ä»¥èº«è©¦æ³•",
            "æª¢è­¦ç›£ç®¡å¸³æˆ¶åŠATMè§£é™¤åˆ†æœŸä»˜æ¬¾éƒ½æ˜¯é¨™",
            "åè©é¨™å°ˆç·š165ï¼Œå¤šå•ã€å¤šæŸ¥ã€å¤šç¢ºèª",
            "å‹¿é»ä¾†è·¯ä¸æ˜ç°¡è¨Šï¼Œé¿å…å€‹è³‡å¯†ç¢¼å¤–æ´©",
            "ä½¿ç”¨å…¬ç”¨Wi-Fiå¾Œï¼Œè¦è¨˜å¾—ç™»å‡ºï¼Œé¿å…é§­å®¢å…¥ä¾µ",
            "æ³•å¾‹ç‚ºå®ˆè­·å…¬ç›Šï¼Œå·²ç¦æ­¢æ©Ÿé—œå°æ­å¼Šè€…çš„ä¸åˆ©æªæ–½",
            "è³„é¸æª¢èˆ‰å°ˆç·šï¼š0800-024-099æ’¥é€šå¾Œå†æŒ‰4",
            "é¸èˆ‰æ™‚ï¼Œè²·ç¥¨è³£ç¥¨éƒ½æœ‰ç½ª"
        ];

        let flippedCards = [];
        let matchedCount = 0;
        let gameActive = false;
        let startTime, timerInterval;

        const board = document.getElementById('game-board');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const timerDisplay = document.getElementById('timer-display');
        const modal = document.getElementById('modal');
        const startView = document.getElementById('start-view');
        const endView = document.getElementById('end-view');

        function initHints() {
            document.getElementById('hint-list').innerHTML = allSlogans.map((s, i) => `
                <div class="hint-item"><span class="text-blue-600 mr-1">${i+1}.</span>${s}</div>
            `).join('');
        }

        function updateProgress() {
            const percentage = (matchedCount / 6) * 100;
            progressBar.style.width = `${percentage}%`;
            if (matchedCount === 6) {
                progressText.innerHTML = '<span class="text-sm">âœ…</span>';
                progressBar.classList.replace('bg-green-500', 'bg-green-600');
            } else {
                progressText.innerText = `${matchedCount} / 6`;
                progressBar.classList.replace('bg-green-600', 'bg-green-500');
            }
        }

        function initGame() {
            board.innerHTML = '';
            initHints();
            const selected = [...allSlogans].sort(() => Math.random() - 0.5).slice(0, 6);
            const deck = [];
            selected.forEach(s => { deck.push(s); deck.push(s); });
            deck.sort(() => Math.random() - 0.5);

            deck.forEach(text => {
                const cardContainer = document.createElement('div');
                cardContainer.className = 'card';
                cardContainer.innerHTML = `
                    <div class="card-inner" onclick="flipCard(this)" data-text="${text}">
                        <div class="card-front" style="--show-icon: none;"></div>
                        <div class="card-back">${text}</div>
                    </div>
                `;
                board.appendChild(cardContainer);
            });

            matchedCount = 0;
            updateProgress();
            timerDisplay.innerText = `0s`;
            flippedCards = [];
        }

        function flipCard(inner) {
            if (!gameActive || flippedCards.length >= 2) return;
            const parent = inner.parentElement;
            if (parent.classList.contains('flipped') || parent.classList.contains('matched')) return;

            parent.classList.add('flipped');
            flippedCards.push(inner);

            if (flippedCards.length === 2) checkMatch();
        }

        function checkMatch() {
            const [c1, c2] = flippedCards;
            if (c1.dataset.text === c2.dataset.text) {
                matchedCount++;
                c1.parentElement.classList.replace('flipped', 'matched');
                c2.parentElement.classList.replace('flipped', 'matched');
                c1.parentElement.classList.add('match-anim');
                c2.parentElement.classList.add('match-anim');
                updateProgress();
                flippedCards = [];
                if (matchedCount === 6) endGame();
            } else {
                setTimeout(() => {
                    c1.parentElement.classList.remove('flipped');
                    c2.parentElement.classList.remove('flipped');
                    flippedCards = [];
                }, 800);
            }
        }

        function endGame() {
            gameActive = false;
            clearInterval(timerInterval);
            const lastSeconds = Math.floor((Date.now() - startTime) / 1000);
            setTimeout(() => {
                startView.classList.add('hidden');
                endView.classList.remove('hidden');
                modal.classList.remove('hidden');
                document.getElementById('final-time-text').innerText = `æ‚¨çš„æˆç¸¾ï¼š${lastSeconds} ç§’`;
            }, 600);
        }

        document.getElementById('start-btn').onclick = () => {
            modal.classList.add('hidden');
            initGame();
            gameActive = true;
            startTime = Date.now();
            timerInterval = setInterval(() => {
                timerDisplay.innerText = `${Math.floor((Date.now() - startTime) / 1000)}s`;
            }, 1000);
        };

        document.getElementById('restart-btn').onclick = () => {
            startView.classList.remove('hidden');
            endView.classList.add('hidden');
            initGame();
            gameActive = true;
            startTime = Date.now();
            timerInterval = setInterval(() => {
                timerDisplay.innerText = `${Math.floor((Date.now() - startTime) / 1000)}s`;
            }, 1000);
        };

        // é è¼‰åœ–ç‰‡æª¢æŸ¥
        new Image().src = 'bg.jpg';
    </script>
</body>
</html>